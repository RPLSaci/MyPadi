{"mappings":";AAAA,eAAe;IACX,IAAI;QACF,IAAI,QAAQ,aAAa,QAAQ,SAAS,+CAA+C;QAEzF,QAAQ,KAAK,MAAM,OAAO;QAC1B,IAAI,CAAC,OAAO;YACV,MAAM;YACN,OAAO,SAAS,SAAS,OAAK;QAChC;QAEA,MAAM,WAAW,MAAM,MAAM,UAAU,MAAI,cAAc;YACvD,QAAQ;YACR,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,MAAM,CAAC;YACpC;QACF;QAEA,IAAI,SAAS,WAAW,KAAK;YAC3B,MAAM;YACN,sFAAsF;YACtF,aAAa;YACb;QACF;QAEA,MAAM,OAAO,MAAM,SAAS;QAC5B,IAAI,SAAS,IAAI;YACf,QAAQ,IAAI,CAAC,KAAK,EAAE,KAAK,KAAK,mBAAmB,CAAC;YAClD,SAAS,eAAe,SAAS,UAAU,OAAO;QACpD,OACE,MAAM;QAER;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,MAAM;QACd,MAAM;QACN,SAAS,SAAS,OAAO;IAC3B;AACJ;AAEA,eAAe;IACb,IAAI;QACF,IAAI,QAAQ,aAAa,QAAQ,SAAS,+CAA+C;QAEzF,QAAQ,KAAK,MAAM,OAAO;QAE1B,MAAM,WAAW,MAAM,MAAM,UAAU,MAAI,cAAc;YACvD,QAAQ;YACR,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,MAAM,CAAC;YACpC;QACF;IACF,EAAE,OAAO,OAAO,CAEhB;IAEA,IAAI;QACF;IACF,EAAE,OAAO,OAAO;QACd,MAAM;IACR;AACF;AAGA,SAAS;IACP,IAAI,UAAU,aACV,UAAU,YAAY,mBAAmB;SAEzC,MAAM;AAEZ;AAGA,SAAS,0CAAoB,UAAU;IACrC,IAAI,UAAU,AAAC,CAAA,aAAa,EAAC,IAAK,IAAI;IACtC,OAAO;AACT;AAEA,eAAe,mCAAa,QAAQ;IAClC,IAAI,MAAM,SAAS,OAAO;IAC1B,IAAI,OAAO,SAAS,OAAO;IAE3B,MAAM,WAAW;aAAE;cAAI;IAAK;IAExB,MAAM,WAAW,MAAM,MAAM,UAAU,MAAI,eAAe;QACxD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,UAAU;IACvB;IAGA,MAAM,OAAO,MAAM,SAAS;IAC5B,QAAQ,IAAI;IACZ,SAAS,eAAe,SAAS,UAAU,OAAO;IAClD,SAAS,eAAe,UAAU,YAAY,KAAK,SAAS;IAC5D,SAAS,eAAe,UAAU,YAAY,KAAK,KAAK,QAAQ;IAChE,SAAS,eAAe,QAAQ,YAAY,KAAK,KAAK,QAAQ,KAAK,MAAK;IACxE,SAAS,eAAe,WAAW,aAAa,OAAM,KAAK,KAAK,QAAQ,KAAK;AAE7E,GAAG;AAEH,gFAAgF;AAChF,qCAAqC;AACrC,wBAAwB;AAE9B;AAEA;AAGA,IAAI,mCAAa,CAAC;;AAElB,CAAC","sources":["src/assets/js/index.js"],"sourcesContent":["async function checkLogin() {\n    try {\n      let token = localStorage.getItem('user'); // Assuming the token is stored in localStorage\n\n      token = JSON.parse(token).token\n      if (!token) {\n        alert('Anda belum masuk. Silakan masuk terlebih dahulu.');\n        return document.location.href=\"./login.html\";\n      }\n  \n      const response = await fetch(globalvar.api+'checkLogin', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n  \n      if (response.status === 401) {\n        alert('Token tidak valid atau sesi telah berakhir. Silakan masuk kembali.');\n        // If the token is invalid, you can also consider clearing the token from localStorage\n        localStorage.clear()\n        return;\n      }\n  \n      const data = await response.json();\n      if (response.ok) {\n        console.log(`Halo ${data.user}! Anda sudah masuk.`);\n        document.getElementById(\"cards\").classList.remove(\"hidden\")\n      } else {\n        alert('Gagal memeriksa status masuk.');\n      }\n      checkUserInfo()\n    } catch (error) {\n      console.error(error);\n      alert('Kamu Belum Masuk');\n      document.location.href = \"./login.html\"\n    }\n}\n\nasync function checkUserInfo(){\n  try {\n    let token = localStorage.getItem('user'); // Assuming the token is stored in localStorage\n\n    token = JSON.parse(token).token\n\n    const response = await fetch(globalvar.api+'checkLogin', {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n  } catch (error) {\n    \n  }\n\n  try {\n    getLocation()\n  } catch (error) {\n    alert(\"Please allow location detecting\")\n  }\n}\n\n\nfunction getLocation() {\n  if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(showPosition);\n  } else {\n      alert(\"Geolocation is not supported by this browser.\");\n  }\n}\n\n\nfunction fahrenheitToCelsius(fahrenheit) {\n  var celsius = (fahrenheit - 32) * 5 / 9;\n  return celsius;\n}\n\nasync function showPosition(position) {\n  var lat = position.coords.latitude;\n  var long = position.coords.longitude;\n\n  const userData = { lat,long };\n  \n      const response = await fetch(globalvar.api+'getLocation', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n\n  \n      const data = await response.json();\n      console.log(data)\n      document.getElementById(\"cuaca\").classList.remove(\"hidden\")\n      document.getElementById(\"lokasi\").innerText = data.location.name\n      document.getElementById(\"status\").innerText = data.cond.weather.description\n      document.getElementById(\"temp\").innerText = data.cond.weather.temp.cur +\"° C\"\n      document.getElementById(\"urlFoto\").setAttribute(\"src\",data.cond.weather.icon.url)\n\n      // \n      \n      //                            <h2 class=\"card-title\" id=\"lokasi\">Purwakarta</h2>\n      // <p id=\"status\">sedikit berawan</p>\n      // <p id=\"temp\">26°C</p>\n  \n}\n\ncheckLogin()\n\n\nlet strToCards = `\n\n`"],"names":[],"version":3,"file":"index.js.map"}